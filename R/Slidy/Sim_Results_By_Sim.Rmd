---
author: "Blake H Massey"
date: "`r format(Sys.time(), '%Y-%m-%d')`"
knit: (function(inputFile, encoding) { 
  rmarkdown::render(inputFile, encoding = encoding, 
    output_file = file.path("C:/Users/blake/Desktop/Slidy_Presentations", 
    "Sim_Results_By_Sim.html"))})
output: 
  slidy_presentation:
    theme: 
    font_adjustment: -1
    keep_md: no
    css: "Assets/CSS/style_helvetica.css"    
params:
  sims: 88:102
  points: "all"
title: "`r paste0('Sim Results By Sim - ', stringr::str_to_title(params$points))`"    
---

```{r echo=FALSE, fig.width=6, message=FALSE, results="asis"}
source(file.path("C:/Users/blake/OneDrive/Work/R/Projects/baea_ibm/R",
 "5c_SIM_Simulation_Log.R"))

pacman::p_load(imager, kableExtra, knitr, tidyverse, stringr)
sim_id <- "sim_20210725"
sim_dir <- file.path("C:/TEMP", paste0(sim_id, "-"))  
sims <- params$sims
points <- params$points

for (i in sims) {  
  j <- str_pad(i, 2, side = "left", "0")
  cat(paste("## Simulation", j, '\n'))
  cat(paste(':::: {style="display: flex;"}\n'))
  
  # Hydro distances
  cat(paste('::: {.column width=40%}\n'))
  file_name <- paste0(sim_dir, j, "/Calibration/gg_combine_hydro_dist.png")
  image_code <- paste0('![](', file_name, '){width=100%}\n')
  cat(image_code)
  cat(paste(':::\n'))
  
  # Ridgeline flights
  cat(paste('::: {.column width=40%}\n'))
  file_name <- paste0(sim_dir, j, "/Calibration/gg_combine_ridge.png")
  image_code <- paste0('![](', file_name, '){width=100%}\n')
  cat(image_code)
  cat(paste(':::\n'))
  
  cat(paste('::: {.column width=20%}\n'))
  sim_log_i <- sim_log %>%
    filter(sim == paste0("20210725-", j)) %>%
    mutate(notes = str_replace_all(notes, "->", "$\\\\rightarrow$")) %>%
    dplyr::select(Parameters = notes)
  cat(kable(sim_log_i))  
  cat(paste(':::\n'))
  cat(paste('::::\n'))
  for (k in c("Ellis", "Sandy", "Hebron", "Musquash")){
    file_name <- paste0(sim_dir, j, "/AKDEs/", sim_id, "-", j, "_01-",
      k, "_", points, "_matched.png")
    image_code <- paste0('![](', file_name, '){width=75%}\n')
    cat(image_code)
  }
  cat("\n")
}
```
