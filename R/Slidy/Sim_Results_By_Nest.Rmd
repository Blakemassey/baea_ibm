---
author: "Blake H Massey"
date: "`r format(Sys.time(), '%Y-%m-%d')`"
knit: (function(inputFile, encoding) { 
  rmarkdown::render(inputFile, encoding = encoding, 
    output_file = file.path("C:/Users/blake/Desktop/Slidy_Presentations", 
    "Sim_Results_By_Nest.html"))})
output: 
  slidy_presentation:
    theme: 
    font_adjustment: -1
    keep_md: no
    css: "Assets/CSS/style_helvetica.css"
params:
  sims: 1
  nests: "Ellis"
  points: "all"
title: "`r paste0('Sim Results By Nest - ', str_to_title(params$points))`"  
---

```{r echo=FALSE, fig.width=6, message=FALSE, results="asis"}
pacman::p_load(imager, kableExtra, knitr, tidyverse)
sim_id <- "sim_20210725"
sim_dir <- file.path("C:/TEMP", paste0(sim_id, "-"))  
sims <- params$sims
nests <- params$nests
points <- params$points

for (j in nests){
  cat(paste("## Nest", j, '\n'))
  for (i in sims){
    cat(paste(':::: {style="display: flex;"}\n'))
    cat(paste('::: {.column width=80%}\n'))
    file_name <- paste0(sim_dir, str_pad(i, 2, side = "left", "0"), "/AKDEs/",
      sim_id, "-", str_pad(i, 2, side = "left", "0"), "_01-", j,
      "_", points ,"_matched.png")
    image_code <- paste0('![](', file_name, '){width=100%}\n')
    cat(image_code)
    cat(paste(':::\n'))
    cat(paste('::: {.column width=20%}\n'))
    sim_log_i <- sim_log %>%
      filter(sim == paste0("20210725-",  str_pad(i, 2, side = "left", "0"))) %>%
      mutate(notes = str_replace_all(notes, "->", "$\\\\rightarrow$")) %>%
      dplyr::select(Parameters = notes)
    cat(paste('\n'))
    cat(paste('<br><br>'))
    cat(paste0('<center>__', sim_id, "-", str_pad(i, 2, side = "left", "0"),
      "__</center>"))
    cat(paste('<br>'))
    cat(kable(sim_log_i))
    cat(paste(':::\n'))
    cat(paste('::::\n\n'))
  }
}
cat("\n")

```
