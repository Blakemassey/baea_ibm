---
title: ""
output: pdf_document
params:
  map_file: NA
  covar_table: NA
  model_table: NA
header-includes:
- \usepackage{xltabular}
- \usepackage{booktabs}
- \usepackage{makecell}
- \usepackage{caption}
   
---

```{r setup, include = FALSE}
pacman::p_load(magick, knitr, rmarkdown, xtable)
knitr::opts_chunk$set(echo = FALSE)
options(xtable.include.rownames = FALSE)
#ptions(xtable.comment = FALSE)
map_file <- params$map_file
covar_table <- params$covar_table
model_table <- params$model_table
```

```{r}
knitr::include_graphics(map_file)
#hline.after = rep(c(1:nrow(df)),2)# repeating horizontal lines in xtable
```

\newpage

```{r results = "asis"}
covar_xtable <- xtable(covar_table)
hline <- (which(str_detect(covar_xtable$`Step Type`, "[:alpha:]"))-1)[-1]
htype <- c(rep("\\midrule ", times = length(hline)))
covar_xtable_final <- xtable(covar_xtable, digits = c(0, 0, 0, 0, 3), 
  caption = "Model Terms: Candidates and Final Fitted Terms")
display(covar_xtable_final) = c("s", "s", "s", "s", "g")
asis_output("Model Terms: Candidates and Final Fitted Terms")
print(covar_xtable_final,
  add.to.row = list(pos = as.list(hline), command = htype),
  floating = FALSE, width = "\\textwidth",
  tabular.environment = "xltabular",
  caption.placement = "top",
  booktabs = TRUE,
  size = "\\fontsize{11pt}{12pt}\\selectfont",
  type = "latex",
  print.results = TRUE)

model_xtable <- xtable(model_table)
hline <- (which(str_detect(model_xtable$`Step Type`, "[:alpha:]"))-1)[-1]
htype <- c(rep("\\midrule ", times = length(hline)))
align(model_xtable) <- "llX"
asis_output("Full Fitted Models")
print(model_xtable,
  add.to.row = list(pos = as.list(hline), command = htype),
  floating = FALSE, width = "\\textwidth",
  tabular.environment = "tabularx",
  caption.placement = "top",
  booktabs = TRUE,
  size = "\\fontsize{11pt}{12pt}\\selectfont",
  type = "latex",
  print.results = TRUE)

```
